<!DOCTYPE html>
<html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="dns-prefetch" href="//cdn.joeahand.com"><title>Joe Hand | Better communities with open data</title><meta name="description" content="Joe Hand is a product lead, developer, researcher, and open data enthusiast. Joe works with international communities, open source developers, scientists, and data visualization &amp; mapping experts to enable communities to solve problems."><script>function loadFont(a,b,c,d){function e(){if(!window.FontFace)return!1;var a=new FontFace("t",'url("data:application/font-woff2,") format("woff2")',{}),b=a.load();try{b.then(null,function(){})}catch(c){}return"loading"===a.status}var f=navigator.userAgent,g=!window.addEventListener||f.match(/(Android (2|3|4.0|4.1|4.2|4.3))|(Opera (Mini|Mobi))/)&&!f.match(/Chrome/);if(!g){var h={};try{h=localStorage||{}}catch(i){}var j="x-font-"+a,k=j+"url",l=j+"css",m=h[k],n=h[l],o=document.createElement("style");if(o.rel="stylesheet",document.head.appendChild(o),!n||m!==b&&m!==c){var p=c&&e()?c:b,q=new XMLHttpRequest;q.open("GET",p),q.onload=function(){q.status>=200&&q.status<400&&(h[k]=p,h[l]=q.responseText,d||(o.textContent=q.responseText))},q.send()}else o.textContent=n}}</script><script>loadFont('joeFonts0.2', "https://joeahand.com/theme/fonts/fonts.woff.css", "https://joeahand.com/theme/fonts/fonts.woff2.css")</script><style>@charset "UTF-8";html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block;vertical-align:baseline}audio:not([controls]){display:none;height:0}[hidden],template{display:none}a{background-color:transparent}a:active,a:hover{outline:0}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:bold}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-0.5em}sub{bottom:-0.25em}img{border:0}svg:not(:root){overflow:hidden}figure{margin:1em 40px}hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}pre{overflow:auto}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}button,input,optgroup,select,textarea{color:inherit;font:inherit;margin:0}button{overflow:visible}button,select{text-transform:none}button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}input{line-height:normal}input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}input[type="number"]::-webkit-inner-spin-button,input[type="number"]::-webkit-outer-spin-button{height:auto}input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}fieldset{border:1px solid #c0c0c0;margin:0 2px;padding:.35em .625em .75em}legend{border:0;padding:0}textarea{overflow:auto}optgroup{font-weight:bold}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}.hidden,[hidden]{display:none!important}.pure-img{max-width:100%;height:auto;display:block}.pure-menu{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.pure-menu-fixed{position:fixed;left:0;top:0;z-index:3}.pure-menu-list,.pure-menu-item{position:relative}.pure-menu-list{list-style:none;margin:0;padding:0}.pure-menu-item{padding:0;margin:0;height:100%}.pure-menu-link,.pure-menu-heading{display:block;text-decoration:none;white-space:nowrap}.pure-menu-horizontal{width:100%;white-space:nowrap}.pure-menu-horizontal .pure-menu-list{display:inline-block}.pure-menu-horizontal .pure-menu-item,.pure-menu-horizontal .pure-menu-heading,.pure-menu-horizontal .pure-menu-separator{display:inline-block;*display:inline;zoom:1;vertical-align:middle}.pure-menu-separator{background-color:#ccc;height:1px;margin:.3em 0}.pure-menu-horizontal .pure-menu-separator{width:1px;height:1.3em;margin:0 .3em}.pure-menu-heading{text-transform:uppercase;color:#565d64}.pure-menu-link{color:#777}.pure-menu-children{background-color:#fff}.pure-menu-link,.pure-menu-disabled,.pure-menu-heading{padding:.5em 1em}.pure-menu-disabled{opacity:.5}.pure-menu-disabled .pure-menu-link:hover{background-color:transparent}.pure-menu-active>.pure-menu-link,.pure-menu-link:hover,.pure-menu-link:focus{background-color:#eee}.pure-menu-selected .pure-menu-link,.pure-menu-selected .pure-menu-link:visited{color:#000}.pure-table{border-collapse:collapse;border-spacing:0;empty-cells:show;border:1px solid #cbcbcb}.pure-table caption{color:#000;font:italic 85% / 1 arial,sans-serif;padding:1em 0;text-align:center}.pure-table td,.pure-table th{border-left:1px solid #cbcbcb;border-width:0 0 0 1px;font-size:inherit;margin:0;overflow:visible;padding:.5em 1em}.pure-table td:first-child,.pure-table th:first-child{border-left-width:0}.pure-table thead{background-color:#e0e0e0;color:#000;text-align:left;vertical-align:bottom}.pure-table td{background-color:transparent}.pure-table-odd td{background-color:#f2f2f2}.pure-table-striped tr:nth-child(2n-1) td{background-color:#f2f2f2}.pure-table-bordered td{border-bottom:1px solid #cbcbcb}.pure-table-bordered tbody>tr:last-child>td{border-bottom-width:0}.pure-table-horizontal td,.pure-table-horizontal th{border-width:0 0 1px 0;border-bottom:1px solid #cbcbcb}.pure-table-horizontal tbody>tr:last-child>td{border-bottom-width:0}.pure-g{letter-spacing:-0.31em;*letter-spacing:normal;*word-spacing:-0.43em;text-rendering:optimizespeed;font-family:FreeSans,Arimo,"Droid Sans",Helvetica,Arial,sans-serif;display:-webkit-flex;-webkit-flex-flow:row wrap;display:-ms-flexbox;-ms-flex-flow:row wrap;-ms-align-content:flex-start;-webkit-align-content:flex-start;align-content:flex-start}.opera-only :-o-prefocus,.pure-g{word-spacing:-0.43em}.pure-u{display:inline-block;*display:inline;zoom:1;letter-spacing:normal;word-spacing:normal;vertical-align:top;text-rendering:auto}.pure-g [class *= "pure-u"]{font-family:sans-serif}.pure-u-1,.pure-u-1-1,.pure-u-1-2,.pure-u-1-3,.pure-u-2-3,.pure-u-1-4,.pure-u-3-4,.pure-u-1-5,.pure-u-2-5,.pure-u-3-5,.pure-u-4-5,.pure-u-5-5,.pure-u-1-6,.pure-u-5-6,.pure-u-1-8,.pure-u-3-8,.pure-u-5-8,.pure-u-7-8,.pure-u-1-12,.pure-u-5-12,.pure-u-7-12,.pure-u-11-12,.pure-u-1-24,.pure-u-2-24,.pure-u-3-24,.pure-u-4-24,.pure-u-5-24,.pure-u-6-24,.pure-u-7-24,.pure-u-8-24,.pure-u-9-24,.pure-u-10-24,.pure-u-11-24,.pure-u-12-24,.pure-u-13-24,.pure-u-14-24,.pure-u-15-24,.pure-u-16-24,.pure-u-17-24,.pure-u-18-24,.pure-u-19-24,.pure-u-20-24,.pure-u-21-24,.pure-u-22-24,.pure-u-23-24,.pure-u-24-24{display:inline-block;*display:inline;zoom:1;letter-spacing:normal;word-spacing:normal;vertical-align:top;text-rendering:auto}.pure-u-1-24{width:4.1667%;*width:4.1357%}.pure-u-1-12,.pure-u-2-24{width:8.3333%;*width:8.3023%}.pure-u-1-8,.pure-u-3-24{width:12.5%;*width:12.469%}.pure-u-1-6,.pure-u-4-24{width:16.6667%;*width:16.6357%}.pure-u-1-5{width:20%;*width:19.969%}.pure-u-5-24{width:20.8333%;*width:20.8023%}.pure-u-1-4,.pure-u-6-24{width:25%;*width:24.969%}.pure-u-7-24{width:29.1667%;*width:29.1357%}.pure-u-1-3,.pure-u-8-24{width:33.3333%;*width:33.3023%}.pure-u-3-8,.pure-u-9-24{width:37.5%;*width:37.469%}.pure-u-2-5{width:40%;*width:39.969%}.pure-u-5-12,.pure-u-10-24{width:41.6667%;*width:41.6357%}.pure-u-11-24{width:45.8333%;*width:45.8023%}.pure-u-1-2,.pure-u-12-24{width:50%;*width:49.969%}.pure-u-13-24{width:54.1667%;*width:54.1357%}.pure-u-7-12,.pure-u-14-24{width:58.3333%;*width:58.3023%}.pure-u-3-5{width:60%;*width:59.969%}.pure-u-5-8,.pure-u-15-24{width:62.5%;*width:62.469%}.pure-u-2-3,.pure-u-16-24{width:66.6667%;*width:66.6357%}.pure-u-17-24{width:70.8333%;*width:70.8023%}.pure-u-3-4,.pure-u-18-24{width:75%;*width:74.969%}.pure-u-19-24{width:79.1667%;*width:79.1357%}.pure-u-4-5{width:80%;*width:79.969%}.pure-u-5-6,.pure-u-20-24{width:83.3333%;*width:83.3023%}.pure-u-7-8,.pure-u-21-24{width:87.5%;*width:87.469%}.pure-u-11-12,.pure-u-22-24{width:91.6667%;*width:91.6357%}.pure-u-23-24{width:95.8333%;*width:95.8023%}.pure-u-1,.pure-u-1-1,.pure-u-5-5,.pure-u-24-24{width:100%}@media screen and (min-width:35.5em){.pure-u-sm-1,.pure-u-sm-1-1,.pure-u-sm-1-2,.pure-u-sm-1-3,.pure-u-sm-2-3,.pure-u-sm-1-4,.pure-u-sm-3-4,.pure-u-sm-1-5,.pure-u-sm-2-5,.pure-u-sm-3-5,.pure-u-sm-4-5,.pure-u-sm-5-5,.pure-u-sm-1-6,.pure-u-sm-5-6,.pure-u-sm-1-8,.pure-u-sm-3-8,.pure-u-sm-5-8,.pure-u-sm-7-8,.pure-u-sm-1-12,.pure-u-sm-5-12,.pure-u-sm-7-12,.pure-u-sm-11-12,.pure-u-sm-1-24,.pure-u-sm-2-24,.pure-u-sm-3-24,.pure-u-sm-4-24,.pure-u-sm-5-24,.pure-u-sm-6-24,.pure-u-sm-7-24,.pure-u-sm-8-24,.pure-u-sm-9-24,.pure-u-sm-10-24,.pure-u-sm-11-24,.pure-u-sm-12-24,.pure-u-sm-13-24,.pure-u-sm-14-24,.pure-u-sm-15-24,.pure-u-sm-16-24,.pure-u-sm-17-24,.pure-u-sm-18-24,.pure-u-sm-19-24,.pure-u-sm-20-24,.pure-u-sm-21-24,.pure-u-sm-22-24,.pure-u-sm-23-24,.pure-u-sm-24-24{display:inline-block;*display:inline;zoom:1;letter-spacing:normal;word-spacing:normal;vertical-align:top;text-rendering:auto}.pure-u-sm-1-24{width:4.1667%;*width:4.1357%}.pure-u-sm-1-12,.pure-u-sm-2-24{width:8.3333%;*width:8.3023%}.pure-u-sm-1-8,.pure-u-sm-3-24{width:12.5%;*width:12.469%}.pure-u-sm-1-6,.pure-u-sm-4-24{width:16.6667%;*width:16.6357%}.pure-u-sm-1-5{width:20%;*width:19.969%}.pure-u-sm-5-24{width:20.8333%;*width:20.8023%}.pure-u-sm-1-4,.pure-u-sm-6-24{width:25%;*width:24.969%}.pure-u-sm-7-24{width:29.1667%;*width:29.1357%}.pure-u-sm-1-3,.pure-u-sm-8-24{width:33.3333%;*width:33.3023%}.pure-u-sm-3-8,.pure-u-sm-9-24{width:37.5%;*width:37.469%}.pure-u-sm-2-5{width:40%;*width:39.969%}.pure-u-sm-5-12,.pure-u-sm-10-24{width:41.6667%;*width:41.6357%}.pure-u-sm-11-24{width:45.8333%;*width:45.8023%}.pure-u-sm-1-2,.pure-u-sm-12-24{width:50%;*width:49.969%}.pure-u-sm-13-24{width:54.1667%;*width:54.1357%}.pure-u-sm-7-12,.pure-u-sm-14-24{width:58.3333%;*width:58.3023%}.pure-u-sm-3-5{width:60%;*width:59.969%}.pure-u-sm-5-8,.pure-u-sm-15-24{width:62.5%;*width:62.469%}.pure-u-sm-2-3,.pure-u-sm-16-24{width:66.6667%;*width:66.6357%}.pure-u-sm-17-24{width:70.8333%;*width:70.8023%}.pure-u-sm-3-4,.pure-u-sm-18-24{width:75%;*width:74.969%}.pure-u-sm-19-24{width:79.1667%;*width:79.1357%}.pure-u-sm-4-5{width:80%;*width:79.969%}.pure-u-sm-5-6,.pure-u-sm-20-24{width:83.3333%;*width:83.3023%}.pure-u-sm-7-8,.pure-u-sm-21-24{width:87.5%;*width:87.469%}.pure-u-sm-11-12,.pure-u-sm-22-24{width:91.6667%;*width:91.6357%}.pure-u-sm-23-24{width:95.8333%;*width:95.8023%}.pure-u-sm-1,.pure-u-sm-1-1,.pure-u-sm-5-5,.pure-u-sm-24-24{width:100%}}@media screen and (min-width:48em){.pure-u-md-1,.pure-u-md-1-1,.pure-u-md-1-2,.pure-u-md-1-3,.pure-u-md-2-3,.pure-u-md-1-4,.pure-u-md-3-4,.pure-u-md-1-5,.pure-u-md-2-5,.pure-u-md-3-5,.pure-u-md-4-5,.pure-u-md-5-5,.pure-u-md-1-6,.pure-u-md-5-6,.pure-u-md-1-8,.pure-u-md-3-8,.pure-u-md-5-8,.pure-u-md-7-8,.pure-u-md-1-12,.pure-u-md-5-12,.pure-u-md-7-12,.pure-u-md-11-12,.pure-u-md-1-24,.pure-u-md-2-24,.pure-u-md-3-24,.pure-u-md-4-24,.pure-u-md-5-24,.pure-u-md-6-24,.pure-u-md-7-24,.pure-u-md-8-24,.pure-u-md-9-24,.pure-u-md-10-24,.pure-u-md-11-24,.pure-u-md-12-24,.pure-u-md-13-24,.pure-u-md-14-24,.pure-u-md-15-24,.pure-u-md-16-24,.pure-u-md-17-24,.pure-u-md-18-24,.pure-u-md-19-24,.pure-u-md-20-24,.pure-u-md-21-24,.pure-u-md-22-24,.pure-u-md-23-24,.pure-u-md-24-24{display:inline-block;*display:inline;zoom:1;letter-spacing:normal;word-spacing:normal;vertical-align:top;text-rendering:auto}.pure-u-md-1-24{width:4.1667%;*width:4.1357%}.pure-u-md-1-12,.pure-u-md-2-24{width:8.3333%;*width:8.3023%}.pure-u-md-1-8,.pure-u-md-3-24{width:12.5%;*width:12.469%}.pure-u-md-1-6,.pure-u-md-4-24{width:16.6667%;*width:16.6357%}.pure-u-md-1-5{width:20%;*width:19.969%}.pure-u-md-5-24{width:20.8333%;*width:20.8023%}.pure-u-md-1-4,.pure-u-md-6-24{width:25%;*width:24.969%}.pure-u-md-7-24{width:29.1667%;*width:29.1357%}.pure-u-md-1-3,.pure-u-md-8-24{width:33.3333%;*width:33.3023%}.pure-u-md-3-8,.pure-u-md-9-24{width:37.5%;*width:37.469%}.pure-u-md-2-5{width:40%;*width:39.969%}.pure-u-md-5-12,.pure-u-md-10-24{width:41.6667%;*width:41.6357%}.pure-u-md-11-24{width:45.8333%;*width:45.8023%}.pure-u-md-1-2,.pure-u-md-12-24{width:50%;*width:49.969%}.pure-u-md-13-24{width:54.1667%;*width:54.1357%}.pure-u-md-7-12,.pure-u-md-14-24{width:58.3333%;*width:58.3023%}.pure-u-md-3-5{width:60%;*width:59.969%}.pure-u-md-5-8,.pure-u-md-15-24{width:62.5%;*width:62.469%}.pure-u-md-2-3,.pure-u-md-16-24{width:66.6667%;*width:66.6357%}.pure-u-md-17-24{width:70.8333%;*width:70.8023%}.pure-u-md-3-4,.pure-u-md-18-24{width:75%;*width:74.969%}.pure-u-md-19-24{width:79.1667%;*width:79.1357%}.pure-u-md-4-5{width:80%;*width:79.969%}.pure-u-md-5-6,.pure-u-md-20-24{width:83.3333%;*width:83.3023%}.pure-u-md-7-8,.pure-u-md-21-24{width:87.5%;*width:87.469%}.pure-u-md-11-12,.pure-u-md-22-24{width:91.6667%;*width:91.6357%}.pure-u-md-23-24{width:95.8333%;*width:95.8023%}.pure-u-md-1,.pure-u-md-1-1,.pure-u-md-5-5,.pure-u-md-24-24{width:100%}}@media screen and (min-width:64em){.pure-u-lg-1,.pure-u-lg-1-1,.pure-u-lg-1-2,.pure-u-lg-1-3,.pure-u-lg-2-3,.pure-u-lg-1-4,.pure-u-lg-3-4,.pure-u-lg-1-5,.pure-u-lg-2-5,.pure-u-lg-3-5,.pure-u-lg-4-5,.pure-u-lg-5-5,.pure-u-lg-1-6,.pure-u-lg-5-6,.pure-u-lg-1-8,.pure-u-lg-3-8,.pure-u-lg-5-8,.pure-u-lg-7-8,.pure-u-lg-1-12,.pure-u-lg-5-12,.pure-u-lg-7-12,.pure-u-lg-11-12,.pure-u-lg-1-24,.pure-u-lg-2-24,.pure-u-lg-3-24,.pure-u-lg-4-24,.pure-u-lg-5-24,.pure-u-lg-6-24,.pure-u-lg-7-24,.pure-u-lg-8-24,.pure-u-lg-9-24,.pure-u-lg-10-24,.pure-u-lg-11-24,.pure-u-lg-12-24,.pure-u-lg-13-24,.pure-u-lg-14-24,.pure-u-lg-15-24,.pure-u-lg-16-24,.pure-u-lg-17-24,.pure-u-lg-18-24,.pure-u-lg-19-24,.pure-u-lg-20-24,.pure-u-lg-21-24,.pure-u-lg-22-24,.pure-u-lg-23-24,.pure-u-lg-24-24{display:inline-block;*display:inline;zoom:1;letter-spacing:normal;word-spacing:normal;vertical-align:top;text-rendering:auto}.pure-u-lg-1-24{width:4.1667%;*width:4.1357%}.pure-u-lg-1-12,.pure-u-lg-2-24{width:8.3333%;*width:8.3023%}.pure-u-lg-1-8,.pure-u-lg-3-24{width:12.5%;*width:12.469%}.pure-u-lg-1-6,.pure-u-lg-4-24{width:16.6667%;*width:16.6357%}.pure-u-lg-1-5{width:20%;*width:19.969%}.pure-u-lg-5-24{width:20.8333%;*width:20.8023%}.pure-u-lg-1-4,.pure-u-lg-6-24{width:25%;*width:24.969%}.pure-u-lg-7-24{width:29.1667%;*width:29.1357%}.pure-u-lg-1-3,.pure-u-lg-8-24{width:33.3333%;*width:33.3023%}.pure-u-lg-3-8,.pure-u-lg-9-24{width:37.5%;*width:37.469%}.pure-u-lg-2-5{width:40%;*width:39.969%}.pure-u-lg-5-12,.pure-u-lg-10-24{width:41.6667%;*width:41.6357%}.pure-u-lg-11-24{width:45.8333%;*width:45.8023%}.pure-u-lg-1-2,.pure-u-lg-12-24{width:50%;*width:49.969%}.pure-u-lg-13-24{width:54.1667%;*width:54.1357%}.pure-u-lg-7-12,.pure-u-lg-14-24{width:58.3333%;*width:58.3023%}.pure-u-lg-3-5{width:60%;*width:59.969%}.pure-u-lg-5-8,.pure-u-lg-15-24{width:62.5%;*width:62.469%}.pure-u-lg-2-3,.pure-u-lg-16-24{width:66.6667%;*width:66.6357%}.pure-u-lg-17-24{width:70.8333%;*width:70.8023%}.pure-u-lg-3-4,.pure-u-lg-18-24{width:75%;*width:74.969%}.pure-u-lg-19-24{width:79.1667%;*width:79.1357%}.pure-u-lg-4-5{width:80%;*width:79.969%}.pure-u-lg-5-6,.pure-u-lg-20-24{width:83.3333%;*width:83.3023%}.pure-u-lg-7-8,.pure-u-lg-21-24{width:87.5%;*width:87.469%}.pure-u-lg-11-12,.pure-u-lg-22-24{width:91.6667%;*width:91.6357%}.pure-u-lg-23-24{width:95.8333%;*width:95.8023%}.pure-u-lg-1,.pure-u-lg-1-1,.pure-u-lg-5-5,.pure-u-lg-24-24{width:100%}}@media screen and (min-width:80em){.pure-u-xl-1,.pure-u-xl-1-1,.pure-u-xl-1-2,.pure-u-xl-1-3,.pure-u-xl-2-3,.pure-u-xl-1-4,.pure-u-xl-3-4,.pure-u-xl-1-5,.pure-u-xl-2-5,.pure-u-xl-3-5,.pure-u-xl-4-5,.pure-u-xl-5-5,.pure-u-xl-1-6,.pure-u-xl-5-6,.pure-u-xl-1-8,.pure-u-xl-3-8,.pure-u-xl-5-8,.pure-u-xl-7-8,.pure-u-xl-1-12,.pure-u-xl-5-12,.pure-u-xl-7-12,.pure-u-xl-11-12,.pure-u-xl-1-24,.pure-u-xl-2-24,.pure-u-xl-3-24,.pure-u-xl-4-24,.pure-u-xl-5-24,.pure-u-xl-6-24,.pure-u-xl-7-24,.pure-u-xl-8-24,.pure-u-xl-9-24,.pure-u-xl-10-24,.pure-u-xl-11-24,.pure-u-xl-12-24,.pure-u-xl-13-24,.pure-u-xl-14-24,.pure-u-xl-15-24,.pure-u-xl-16-24,.pure-u-xl-17-24,.pure-u-xl-18-24,.pure-u-xl-19-24,.pure-u-xl-20-24,.pure-u-xl-21-24,.pure-u-xl-22-24,.pure-u-xl-23-24,.pure-u-xl-24-24{display:inline-block;*display:inline;zoom:1;letter-spacing:normal;word-spacing:normal;vertical-align:top;text-rendering:auto}.pure-u-xl-1-24{width:4.1667%;*width:4.1357%}.pure-u-xl-1-12,.pure-u-xl-2-24{width:8.3333%;*width:8.3023%}.pure-u-xl-1-8,.pure-u-xl-3-24{width:12.5%;*width:12.469%}.pure-u-xl-1-6,.pure-u-xl-4-24{width:16.6667%;*width:16.6357%}.pure-u-xl-1-5{width:20%;*width:19.969%}.pure-u-xl-5-24{width:20.8333%;*width:20.8023%}.pure-u-xl-1-4,.pure-u-xl-6-24{width:25%;*width:24.969%}.pure-u-xl-7-24{width:29.1667%;*width:29.1357%}.pure-u-xl-1-3,.pure-u-xl-8-24{width:33.3333%;*width:33.3023%}.pure-u-xl-3-8,.pure-u-xl-9-24{width:37.5%;*width:37.469%}.pure-u-xl-2-5{width:40%;*width:39.969%}.pure-u-xl-5-12,.pure-u-xl-10-24{width:41.6667%;*width:41.6357%}.pure-u-xl-11-24{width:45.8333%;*width:45.8023%}.pure-u-xl-1-2,.pure-u-xl-12-24{width:50%;*width:49.969%}.pure-u-xl-13-24{width:54.1667%;*width:54.1357%}.pure-u-xl-7-12,.pure-u-xl-14-24{width:58.3333%;*width:58.3023%}.pure-u-xl-3-5{width:60%;*width:59.969%}.pure-u-xl-5-8,.pure-u-xl-15-24{width:62.5%;*width:62.469%}.pure-u-xl-2-3,.pure-u-xl-16-24{width:66.6667%;*width:66.6357%}.pure-u-xl-17-24{width:70.8333%;*width:70.8023%}.pure-u-xl-3-4,.pure-u-xl-18-24{width:75%;*width:74.969%}.pure-u-xl-19-24{width:79.1667%;*width:79.1357%}.pure-u-xl-4-5{width:80%;*width:79.969%}.pure-u-xl-5-6,.pure-u-xl-20-24{width:83.3333%;*width:83.3023%}.pure-u-xl-7-8,.pure-u-xl-21-24{width:87.5%;*width:87.469%}.pure-u-xl-11-12,.pure-u-xl-22-24{width:91.6667%;*width:91.6357%}.pure-u-xl-23-24{width:95.8333%;*width:95.8023%}.pure-u-xl-1,.pure-u-xl-1-1,.pure-u-xl-5-5,.pure-u-xl-24-24{width:100%}}@charset "UTF-8";@charset "UTF-8";@charset "UTF-8";@charset "UTF-8";@charset "UTF-8";@charset "UTF-8";@charset "UTF-8";@charset "UTF-8";@charset "UTF-8";@charset "UTF-8";@charset "UTF-8";@charset "UTF-8";@charset "UTF-8";@charset "UTF-8";@charset "UTF-8";@charset "UTF-8";@charset "UTF-8";@charset "UTF-8";@charset "UTF-8";@charset "UTF-8";@charset "UTF-8";@charset "UTF-8";@charset "UTF-8";@charset "UTF-8";@charset "UTF-8";@charset "UTF-8";@charset "UTF-8";@charset "UTF-8";@charset "UTF-8";.useicons,span.useicons{font-family:'icons'!important;speak:none;font-style:normal;font-weight:normal;font-variant:normal;text-transform:none;line-height:1;color:inherit;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}a.useicons.twitter:hover{color:#14b0f2!important}a.useicons.github:hover{color:#5590c9!important}a.useicons.instagram:hover{color:#517fa4!important}.red{color:#c0392b}.small-caps{text-transform:uppercase;letter-spacing:.125rem;font-family:inherit;line-height:inherit}small{display:inline-block;font-size:.875rem;line-height:1.333}.is-center{text-align:center;margin-left:auto;margin-right:auto}.justify{text-align:justify}[data-tooltip]{position:relative;z-index:2;cursor:pointer}[data-tooltip]:before,[data-tooltip]:after{visibility:hidden;opacity:0;pointer-events:none}[data-tooltip]:before{position:absolute;bottom:150%;left:50%;margin-bottom:5px;margin-left:-30px;padding:5px;width:50px;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;background-color:#000;background-color:rgba(51,51,51,0.9);color:#fff;content:attr(data-tooltip);text-align:center;font-size:14px;line-height:1.2;font-variant:small-caps}[data-tooltip]:after{position:absolute;bottom:150%;left:50%;margin-left:-5px;width:0;border-top:5px solid #000;border-top:5px solid rgba(51,51,51,0.9);border-right:5px solid transparent;border-left:5px solid transparent;content:" ";font-size:0;line-height:0}[data-tooltip]:hover:before,[data-tooltip]:hover:after{visibility:visible;opacity:1!important}html{overflow-y:scroll;min-height:100%;font-size:100%;-webkit-font-smoothing:antialiased}body{font-family:"Open Sans",sans-serif;color:#2c3e50;font-size:14px;line-height:1.7em}html,button,input,select,textarea,.pure-g [class *= "pure-u"]{font-family:"Open Sans",sans-serif}.document{border-bottom:3px solid #222}a{color:#2c3e50;-webkit-transition:.5s ease-in-out;-moz-transition:.5s ease-in-out;transition:.5s ease-in-out;text-decoration:none}p a,ul a{text-decoration:underline}a:hover{color:#c0392b;text-decoration:none}a:focus{outline:1px dotted #222}h1,.h1,h2,.h2,h3,.h3,h4,.h4,h5,.h5,h6,.h6{color:#222;font-weight:700;font-family:"EB Garamond",serif}.site-header{font-family:"EB Garamond",serif;padding:.5em;text-align:center;box-shadow:0 1px 1px rgba(0,0,0,0.1);border-top:3px solid #222;background:#fff}.site-header nav{display:inline}.site-header h1{display:inline;font-size:inherit;font-weight:inherit;margin:inherit}.site-header .pure-menu-heading{color:#222;font-weight:400;font-size:120%}.site-header .pure-menu-selected a{color:#c0392b}.site-header a{color:#222}.site-header a:hover{color:#c0392b}.pure-menu.pure-menu-fixed{border-bottom:none;z-index:4}.main{padding-top:86px}.external-link.small-caps{font-size:1em;line-height:2em;font-family:"EB Garamond",serif;text-align:center}@media(min-width:48em){body{font-size:16px}.page-content{padding:1em}.site-header{text-align:left}.site-header ul{float:right}}.blog .post-full{margin:25px 0 50px}blockquote{padding-left:1.125rem;border-left:.375rem solid #ecf0f1;font-style:italic;font-size:1.333rem;font-family:"Times New Roman",serif}blockquote p{margin:0}blockquote p+p{margin-top:1.125rem}blockquote cite{color:#34495e;font-style:italic;font-size:.75rem;font-family:"Open Sans",sans-serif}blockquote cite:before{content:"— "}blockquote cite a{color:#34495e}.crossbars{position:relative;display:table;margin:0 auto .75rem;padding:0 1.125rem;width:auto;text-align:center;text-transform:uppercase;letter-spacing:.125rem;font-size:1.125rem;line-height:1.125}.crossbars:before,.crossbars:after{position:absolute;top:50%;display:block;overflow:hidden;margin-top:-0.5rem;width:9999%;height:1.125rem;background:#bdc3c7;content:" "}.crossbars:before{left:-9999%}.crossbars:after{right:-9999%}ol{list-style:decimal}ol ol{list-style:upper-alpha}ol ol ol{list-style:lower-roman}ol ol ol ol{list-style:lower-alpha}ol ol,ol ul,ul ul,ul ol{margin-bottom:0}.run-in{float:left;margin:0;margin-right:.317rem;color:#222;text-transform:uppercase;letter-spacing:.125rem;font-weight:700;font-size:1.125rem}small{display:inline-block;font-size:.875rem;line-height:1.333}.small-caps{text-transform:uppercase;letter-spacing:.125rem;font-weight:700;font-size:1.125rem;font-family:inherit;line-height:inherit}sub,sup{font-size:.75rem}sup{top:-0.475rem}sub{bottom:-0.238rem}.text-left{text-align:left}.text-right{text-align:right}.text-center{text-align:center}.text-justify{text-align:justify}@media only screen and (min-width:600px){.medium-text-left{text-align:left}.medium-text-right{text-align:right}.medium-text-center{text-align:center}.medium-text-justify{text-align:justify}}@media only screen and (min-width:960px){.large-text-left{text-align:left}.large-text-right{text-align:right}.large-text-center{text-align:center}.large-text-justify{text-align:justify}}.strip{margin:0;padding:0;width:100%;list-style:none}.strip .wrapper{padding:1rem 0}.strip .wrapper>*:last-child{margin-bottom:0}@media only screen and (min-width:600px){.strip .wrapper{padding:2rem 0}}.wrapper{margin:0 auto;max-width:64rem;width:90%}.float-left{float:left}.float-right{float:right}.float-none{float:none}@media only screen and (min-width:600px){.medium-float-left{float:left}.medium-float-right{float:right}.medium-float-none{float:none}}@media only screen and (min-width:960px){.large-float-left{float:left}.large-float-right{float:right}.large-float-none{float:none}}.clear{display:block;visibility:hidden;clear:both;overflow:hidden;width:0;height:0}.cf:before,.cf:after{display:table;content:" "}.cf:after{clear:both}.visuallyhidden{position:absolute;overflow:hidden;clip:rect(0 0 0 0);margin:-0.0625rem;padding:0;width:.0625rem;height:.0625rem;border:0}.visuallyhidden.focusable:active,.visuallyhidden.focusable:focus{position:static;overflow:visible;clip:auto;margin:0;width:auto;height:auto}blockquote{border-color:#c0392b}p a,li a{text-decoration:underline}.post-full{position:relative;max-width:700px;margin:0 auto}.post-full header{margin-bottom:2rem}.post-full .title{line-height:1}.post-full .title a{color:#222}.post-full .category{font-size:1.125rem}.post-full .category a{color:#bdc3c7}.post-full .link_url{font-size:1rem}.post-full .link_url a{color:#bdc3c7}.post-full .link_url .useicons{font-size:75%;vertical-align:middle;padding-right:.5rem}.post-full img{margin:1rem auto;border-radius:5px;display:block;max-width:600px}.post-full figure img{margin-top:.5rem}.post-full .post-footer{margin:1rem 0 4rem}.post-full .post-footer a{font-size:.844rem;text-decoration:none}.post-full .post-footer a .useicons{padding-right:.5rem;vertical-align:middle;color:#c0392b}.post-full .post-footer a .pub_date{transition:all 150ms ease-out;color:#95a5a6;font-family:"EB Garamond",serif}.post-full .post-footer a:hover .pub_date{color:#c0392b}@media only screen and (min-width:960px){.post-full .category{position:absolute;right:100%;top:0;margin-right:1rem}}.pagination{text-align:center}.pagination .page-link{color:#222;padding:0 1rem}.pagination .disabled{padding:0 .5rem;color:#ecf0f1}.post-archive{position:relative;overflow:hidden}.post-archive .post-list{margin:0 0 2rem 0}.post-archive .year,.post-archive .pub_date,.post-archive .category{text-transform:uppercase;letter-spacing:.125rem}.post-archive .category{font-weight:bold;color:#95a5a6}.post-archive .category,.post-archive .pub_date{font-size:.844rem}.post-archive .pub_date,.post-archive .year{font-family:"EB Garamond",serif}.post-archive .pub_date{color:#95a5a6;font-weight:bold}.post-archive .title{margin:0;max-width:500px}.post-archive .title a{color:#222}.post-archive .year{font-size:1.777rem;margin-top:4rem;margin-bottom:2rem;color:#222}.post-archive .year:first-child{margin-top:0}.post-archive .crossbars:before,.post-archive .crossbars:after{background-color:#c0392b;height:2px;margin-top:0}.category-header{margin-bottom:2rem;color:#bdc3c7}code,pre,.highlight pre{font-family:'Roboto Mono',monospace}.highlight{font-family:'Roboto Mono',monospace;white-space:pre;overflow:auto;word-wrap:normal;-moz-border-radius:3px;-webkit-border-radius:3px;border-radius:3px;padding:20px;background:#343642;color:#C1C2C3}.highlight .hll{background-color:#ffc}.highlight .gd{color:#2e3436;background-color:#0e1416}.highlight .gr{color:#eeeeec;background-color:#c00}.highlight .gi{color:#babdb6;background-color:#1f2b2d}.highlight .go{color:#2c3032;background-color:#2c3032}.highlight .kt{color:#e3e7df}.highlight .ni{color:#888a85}.highlight .s{color:#989DAA}.highlight .c,.highlight .cm,.highlight .c1,.highlight .cs{color:#8D9684}.highlight .err,.highlight .g,.highlight .l,.highlight .n,.highlight .x,.highlight .p,.highlight .ge,.highlight .gp,.highlight .gs,.highlight .gt,.highlight .ld,.highlight .nc,.highlight .nd,.highlight .ne,.highlight .nl,.highlight .nn,.highlight .nx,.highlight .py,.highlight .ow,.highlight .w,.highlight .sb,.highlight .sc,.highlight .sd,.highlight .s2,.highlight .se,.highlight .sh,.highlight .si,.highlight .sx,.highlight .sr,.highlight .s1,.highlight .ss,.highlight .bp{color:#C1C2C3}.highlight .k,.highlight .kc,.highlight .kd,.highlight .kn,.highlight .kp,.highlight .kr,.highlight .nt{color:#729fcf}.highlight .cp,.highlight .gh,.highlight .gu,.highlight .na,.highlight .nf{color:#E9A94B}.highlight .m,.highlight .nb,.highlight .no,.highlight .mf,.highlight .mh,.highlight .mi,.highlight .mo,.highlight .il{color:#8ae234}.highlight .o{color:#989DAA}.highlight .nv,.highlight .vc,.highlight .vg,.highlight .vi{color:#fff}        </style><script id="loadcss">
function loadCSS(e,n,o,t){"use strict";var d=window.document.createElement("link"),l=n||window.document.getElementsByTagName("script")[0],s=window.document.styleSheets;return d.rel="stylesheet",d.href=e,d.media="only x",t&&(d.onload=t),l.parentNode.insertBefore(d,l),d.onloadcssdefined=function(e){for(var n,o=0;o<s.length;o++)s[o].href&&s[o].href===d.href&&(n=!0);n?e():setTimeout(function(){d.onloadcssdefined(e)})},d.onloadcssdefined(function(){d.media=o||"all"}),d}loadCSS("https://joeahand.com/theme/non_critical.min.css?52bdca18",document.getElementById("loadcss"));
</script><noscript><link href="https://joeahand.com/theme/non_critical.min.css?52bdca18" rel="stylesheet"></noscript></head><body class="blog"><div role="document" class="document"><div class="header"><div class="site-header pure-menu pure-menu-horizontal pure-menu-fixed"><h1><a class="pure-menu-heading small-caps" href="https://joeahand.com">Joe Hand</a></h1><nav><ul class="pure-menu-list"><li class="pure-menu-item "><a class="pure-menu-link small" href="https://joeahand.com/about/">About Joe</a></li><li class="pure-menu-item "><a class="pure-menu-link small" href="https://joeahand.com/cv/">CV</a></li></ul></nav></div></div><main class="main pure-g"><div class="pure-u-2-24 pure-u-lg-1-5"></div><div class="page-content pure-u-20-24 pure-u-lg-3-5"><h2 class="blog-title">Blog</h2><h4 class><a href="https://joeahand.com/archives/">View By Date</a></h4><section class="post-full" data-id><header><h2 class="title"><a href="https://joeahand.com/archive/filtering-a-shapefile-with-python/" rel="bookmark" title="Permalink to Filtering a Shapefile with Python">Filtering a Shapefile with Python</a></h2></header><article class="content"><div class="entry-content"><p>Recently I've been using Python more to work with shapefiles. Frequently I have to create a shapefile by filtering a set of features of a larger shapefile, for instance I wanted to get a shapefile for blocks in New York City from a shapefile of the whole country. While this isn't very difficult in QGIS (and probably ArcGIS), it gets a bit annoying to do over and over. In the last project, I wanted to create files for over 900 cities in the US - so I definitely wasn't going to do that by hand.</p><h3>Quickstart</h3><p>I'll walk through the three main steps to do this in Python:</p><ol><li>Creating a shapefile when <code>my_field = my_value</code> from a large shapefile.</li><li>Finding all values in <code>my_field</code> from your large shapefile.</li><li>Putting 1 &amp; 2 together to create many shapefiles for every value in <code>my_field</code>.</li></ol><p><strong><em> If you want to see how it all comes together, <a href="https://gist.github.com/joehand/498a1656e028c6163aa9">see the full code here</a>.</em></strong></p><p>There are a few Python-based shapefile libraries. The most extensive is <a href="http://www.gdal.org/">GDAL</a> with <a href="https://pypi.python.org/pypi/GDAL/">Python bindings</a>. I decided to use GDAL because of the speed (some of the other libraries are pure Python, thus slower). The only downside is that it can be a pain to install (especially in a virtual environment).</p><h3>Command Line Filtering</h3><p>If you want to filter a shapefile by a specific field/value OGR has a attribute filter function. If you just need to do this once, I recommend using the command line:</p><div class="highlight"><pre>ogr2ogr -f <span class="s2">&quot;ESRI Shapefile&quot;</span> -where <span class="se">\</span>
    <span class="s2">&quot;my_field = some_value&quot;</span> new_shapefile.shp source_shapefile.shp
</pre></div><p>But I needed to filter many times and in the context of another program, so let's look at the Python version of this command.</p><h2>Creating a Single Shapefile for a Known Filter Value</h2><p>In this case, we know our field and know the value we want to filter. We just need to create a single shapefile from the larger one. First, we will open our larger input file and use OGR's filter function to get the filtered features. Then we can create a new shapefile by copying the filtered input file:</p><div class="highlight"><pre><span class="kn">from</span> <span class="nn">osgeo</span> <span class="kn">import</span> <span class="n">ogr</span>

<span class="k">def</span> <span class="nf">create_filtered_shapefile</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">filter_field</span><span class="p">,</span> <span class="n">in_shapefile</span><span class="p">):</span>
    <span class="n">input_layer</span> <span class="o">=</span> <span class="n">ogr</span><span class="o">.</span><span class="n">Open</span><span class="p">(</span><span class="n">in_shapefile</span><span class="p">)</span><span class="o">.</span><span class="n">GetLayer</span><span class="p">()</span>
    <span class="n">out_shapefile</span> <span class="o">=</span> <span class="s">&#39;out_shapefile.shp&#39;</span>

    <span class="c"># Filter by our query</span>
    <span class="n">query_str</span> <span class="o">=</span> <span class="s">&#39;&quot;{}&quot; = &quot;{}&quot;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">filter_field</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
    <span class="n">input_layer</span><span class="o">.</span><span class="n">SetAttributeFilter</span><span class="p">(</span><span class="n">query_str</span><span class="p">)</span>

    <span class="c"># Copy Filtered Layer and Output File</span>
    <span class="n">driver</span> <span class="o">=</span> <span class="n">ogr</span><span class="o">.</span><span class="n">GetDriverByName</span><span class="p">(</span><span class="s">&#39;ESRI Shapefile&#39;</span><span class="p">)</span>
    <span class="n">out_ds</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">CreateDataSource</span><span class="p">(</span><span class="n">out_shapefile</span><span class="p">)</span>
    <span class="n">out_layer</span> <span class="o">=</span> <span class="n">out_ds</span><span class="o">.</span><span class="n">CopyLayer</span><span class="p">(</span><span class="n">input_layer</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
    <span class="k">del</span> <span class="n">input_layer</span><span class="p">,</span> <span class="n">out_layer</span><span class="p">,</span> <span class="n">out_ds</span>
    <span class="k">return</span> <span class="n">out_shapefile</span>
</pre></div><p>Great! We have a filtered shapefile. But what if we want to do this for every value in some field? </p><h2>Getting All Values for a Field</h2><p>If we want to create a shapefile for each value in some field, first we need to figure out all the values for <code>my_field</code>. Luckily, OGR allows you to execute SQL queries on the shapefiles. So we can get our values with some simple SQL: <code>SELECT DISTINCT 'my_field' FROM 'my_shapefile'</code>. And putting it in a function:</p><div class="highlight"><pre><span class="k">def</span> <span class="nf">get_unique_values</span><span class="p">(</span><span class="n">filter_field</span><span class="p">,</span> <span class="n">in_shapefile</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Return unique values of filter from source shapefile.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">sql</span> <span class="o">=</span> <span class="s">&#39;SELECT DISTINCT &quot;{}&quot; FROM {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">filter_field</span><span class="p">,</span> <span class="n">in_shapefile</span><span class="p">)</span>
    <span class="n">layer</span> <span class="o">=</span> <span class="n">ogr</span><span class="o">.</span><span class="n">Open</span><span class="p">(</span><span class="n">in_shapefile</span><span class="p">)</span><span class="o">.</span><span class="n">ExecuteSQL</span><span class="p">(</span><span class="n">sql</span><span class="p">)</span>
    <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="c"># Unfortunately, you have to loop</span>
    <span class="c"># over every feature to get the values. </span>
    <span class="c"># This seems common in dealing w/ Shapefiles</span>
    <span class="k">for</span> <span class="n">feature</span> <span class="ow">in</span> <span class="n">layer</span><span class="p">:</span>
        <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">feature</span><span class="o">.</span><span class="n">GetField</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">values</span>
</pre></div><h2>Creating Many Filtered Shapefiles</h2><p>Finally, we will put the last two functions together with a loop. First, we get all the possible values from some field and then loop over the values and create a shapefile for each one. This can be pretty slow depending on how many shapefiles you need to create. </p><div class="highlight"><pre><span class="k">def</span> <span class="nf">create_all_shapefiles</span><span class="p">(</span><span class="n">filter_field</span><span class="p">,</span> <span class="n">in_shapefile</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Returns list of new shapefiles</span>
<span class="sd">        Creates shapefiles for filtered data</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">out_files</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">values</span> <span class="o">=</span> <span class="n">get_unique_values</span><span class="p">(</span><span class="n">filter_field</span><span class="p">,</span> <span class="n">in_shapefile</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
        <span class="n">out_file</span> <span class="o">=</span> <span class="s">&#39;{}.shp&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">out_file</span><span class="p">):</span>
            <span class="c"># Don&#39;t overwrite existing files</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">out_file</span> <span class="o">=</span> <span class="n">create_filtered_shapefile</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">filter_field</span><span class="p">,</span> <span class="n">in_shapefile</span><span class="p">)</span>
        <span class="n">out_files</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">out_file</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">out_files</span>
</pre></div><p>That's it! We now have a shapefile for each value in <code>my_field</code>. I've written this up as a full Python <code>class</code> you can plug into your own projects. <strong><em><a href="https://gist.github.com/joehand/498a1656e028c6163aa9">Check that code out here</a>.</em></strong></p><p>Let me know if you have questions or found this useful! You can <a href="http://twitter.com/joeahand">find me on Twitter</a>.</p></div><footer class="post-footer"><a class="small-caps" href="https://joeahand.com/archive/filtering-a-shapefile-with-python/"><span class="useicons">&#58882;</span><span class="pub_date">August 2015</span></a></footer></article></section><section class="post-full" data-id><header><h2 class="title"><a href="https://joeahand.com/archive/dynamic-site-pelican-ifttt/" rel="bookmark" title="Permalink to Building a Dynamic yet Static Website with Pelican &amp; IFTTT">Building a Dynamic yet Static Website with Pelican & IFTTT</a></h2></header><article class="content"><div class="entry-content"><p>Static websites seem all the rage right now, and for good reason. A static site is a website that does not have a server creating pages on every request. They are easy to host (for free), fast, and help you offload all the server's work onto the computers visiting your site (d'oh!).</p><p>Static websites also have some serious downsides. Foremost, the content is static - only updated when you take action. If you want <em>dynamic</em> content on the site, you have to rely on APIs and Javascript, adding to the page size and load times. In this trade off, you are passing the work on to the user rather than doing it on the server, perhaps an unwise trade off.</p><p>Don't panic! You can have both! If you visit my <a href="https://joeahand.com">homepage</a> you will notice dynamic content (twitters, fitbit steps, cups of joe drunk) - yet there are no API calls. How is this possible? It must be Magic! Not here, sorry.</p><p>The answer is Python, of course. You can <a href="https://xkcd.com/353/">fly with Python</a> and make dynamic-static websites! <em>(You can build this with other languages, but you can't fly with them... In fact, I am flying as we speak! Probably thanks to Python.)</em></p><h3>Quickstart (how I did it):</h3><ol><li>Set up <a href="https://ifttt.com">IFTTT</a> (If This Then That) and start sending data to Google Spreadsheets (<a href="https://ifttt.com/recipes/112226-save-your-tweets-in-a-google-spreadsheet">sample recipe</a>).</li><li>Grab the data with a custom <a href="http://getpelican.com">Pelican</a><a href="https://github.com/joehand/joeahand/tree/master/plugins/pelican_gdocs">plugin</a>, process it, and output to templates.</li><li>Make the data pretty.</li><li>Create a cron job to update data &amp; regenerate site regularly (mine runs once daily).</li></ol><h2>1. IFTTT Awesomeness</h2><p>If you haven't checked it out, IFTTT is great. When something happens (new tweet posted) IFTTT will do something else (add a row to a spreadsheet). I started using it to automatically send emails to loved ones when I arrived at airports (via check ins on FourSquare).</p><p>IFTTT also has a group of apps called DO (Button, Note, Camera). These apps skip the IF and just DO something. When I have a cup of joe, I tap the DO button on my phone to record it (unfortunately, as I just found out, this doesn't work on airplanes - remind me to record this cup of coffee I drank over Idaho).</p><p>All of my homepage data goes through IFTTT to Google spreadsheets:</p><ul><li>Drink Coffee &gt; Tap Do Button &gt; Add to Spreadsheet</li><li>Joe Tweets &gt; Add to Spreadsheet</li><li>Pocket Article Archived &gt; Add to Spreadsheet</li><li>Instagram Picture Posted &gt; Add to Spreadsheet</li><li>Fitbit Daily Log &gt; Add to Spreadsheet</li></ul><p>Now think of the possibilities with all that data in spreadsheets! For now, let's make it into a nice dynamic-static website.</p><h2>2. Grabbing Spreadsheet Data w/ Pelican Plugin</h2><p><strong><em>Advisory:</em></strong><em>We are going to start getting into some code here. I'm going to assume that you have a running <a href="http://getpelican.com">Pelican</a> website. If not, check out the <a href="http://docs.getpelican.com/en/3.6.2/quickstart.html">Pelican getting started</a> tutorial, it's pretty friendly.</em></p><p>Once the data is in Google Docs, how do we get it out? Turns out, its quite simple. Google has an option to publish spreadsheets as csv files:</p><div class="highlight"><pre>File &gt; Publish to Web &gt; Publish as CSV
</pre></div><p>Now that you have a public csv, we can grab it with the great Python <code>requests</code> library, transform it into a Python object. This will all be a part of our <a href="http://docs.getpelican.com/en/latest/plugins.html">Pelican plugin</a>. My plugin is pretty customized (for processing the data) but you can copy the guts of it.</p><p><strong><em>Note:</em></strong><em>You can hop over to <a href="https://github.com/joehand/joeahand">GitHub</a> to check out the full code at any time (here is <a href="https://github.com/joehand/joeahand/tree/master/plugins/pelican_gdocs">plugin part</a>).</em></p><h3>Getting a Published CSV from Google</h3><div class="highlight"><pre><span class="kn">import</span> <span class="nn">requests</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">PUBLIC_CSV_URL</span><span class="p">)</span>
<span class="n">content</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">text</span>
</pre></div><p>And now you have a csv in <code>content</code>. Yes, its really that easy.</p><h3>Creating Python List from CSV</h3><p>Unfortunately, right now the <code>content</code> variable is just a big string of data, so it is not very useful. </p><p>Now we will create a Python list, with each item in the list being a row of the spreadsheet. Our keys will be the spreadsheet headers.</p><p><strong><em>Note:</em></strong><em>This code is for Python 3. If you aren't on 3, you should really switch.</em></p><div class="highlight"><pre><span class="kn">import</span> <span class="nn">csv</span>
<span class="n">lines</span> <span class="o">=</span> <span class="n">content</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()</span>
<span class="n">header</span> <span class="o">=</span> <span class="p">[</span><span class="n">h</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;,&#39;</span><span class="p">)]</span>
<span class="n">data</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">csv</span><span class="o">.</span><span class="n">DictReader</span><span class="p">(</span><span class="n">lines</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">fieldnames</span><span class="o">=</span><span class="n">header</span><span class="p">))</span>
</pre></div><p>Python's <code>csv</code> module makes this pretty simple. Each item in the data list is now a Python object, for example this is a row from the Instagram spreadsheet:</p><div class="highlight"><pre>{
    &#39;Instagram_Link&#39;:&#39;http://instagram/something&#39;, 
    &#39;Photo_URL&#39;:&#39;http://instagramcdn.com/url&#39;, 
    &#39;Caption&#39;: &#39;This is a picture&#39;, 
    &#39;Date&#39;:&#39;June 21, 2015&#39;
}
</pre></div><p>Captain, we have data (I'm writing this on a plane, I apologize)!</p><h2>3. Visualizing Data</h2><p>From here, what you want to do will depend on your data and how you want to show it. The plugin will allow you to access the data in your templates and then you can let your imagination run wild!</p><p>Using Jinja, outputting to a javascript object is fairly easy. For example, here is the data output for my Fitbit steps:</p><div class="highlight"><pre><span class="x">var steps_data = {</span>
<span class="x">        labels: [</span>
<span class="x">            </span><span class="cp">{%</span>- <span class="k">for</span> <span class="nv">row</span> <span class="k">in</span> <span class="nv">gdocs_data.steps</span> <span class="o">|</span> <span class="nf">reverse</span> -<span class="cp">%}</span><span class="x"></span>
<span class="x">               &#39;</span><span class="cp">{{</span><span class="nv">row.Date</span><span class="cp">}}</span><span class="x">&#39;,</span>
<span class="x">            </span><span class="cp">{%</span>- <span class="k">endfor</span> -<span class="cp">%}</span><span class="x"></span>
<span class="x">        ],</span>
<span class="x">        series: [</span>
<span class="x">            [</span>
<span class="x">            </span><span class="cp">{%</span>- <span class="k">for</span> <span class="nv">row</span> <span class="k">in</span> <span class="nv">gdocs_data.steps</span> <span class="o">|</span> <span class="nf">reverse</span> -<span class="cp">%}</span><span class="x"></span>
<span class="x">                </span><span class="cp">{{</span><span class="nv">row.TotalSteps</span><span class="cp">}}</span><span class="x">,</span>
<span class="x">            </span><span class="cp">{%</span>- <span class="k">endfor</span> -<span class="cp">%}</span><span class="x"></span>
<span class="x">            ]</span>
<span class="x">        ]</span>
<span class="x">};</span>
</pre></div><p>The label/series organization is how Chartist.js likes data. But you can make it whatever kind of js object you like.</p><p>My coffee visualization uses a table created with Jinja loops. There are probably some other options depending on what kind of data you want to visualize.</p><h2>4. Automatically Updating the Site</h2><p>One of the biggest downsides to static sites is the fact they only update when you change the content (and then usually push the site somehow). To get around this, you need a process to run automatically on a schedule and update the website. This is exactly what <a href="http://crontab.org/">cron jobs</a> are for.</p><p>Pelican also makes it fairly easy to push content with a single command (check out the make script). For my site, I use <code>make github</code> which grabs all the latest data, rebuilds the site, and pushes it to Github Pages. A similar process should work for the other <code>make</code> commands.</p><p>In my case, here is what I did:</p><ol><li>Set up a <a href="https://www.digitalocean.com/?refcode=94657bdeab0c">Digital Ocean server</a>.</li><li>Clone my pelican repository.</li><li>Set up the <code>make github</code> command and make sure it all works manually.</li><li>Create a cron job to run daily (at midnight, if you must really know).</li><li>Profit!!?!!</li></ol><p>The hardest part is step 3 and really depends on your server. I used a Python virtual environment but that didn't play very well with the PIL library. Safe to say, it was a pain and I recommend you not do what I did. In the case I go through this again, which is likely, I'll do a better job of documenting my steps the next time (sorry!).</p><h2>Boom - Static Dynamic Site!</h2><p>So there you have it! A static dynamic site with Python! </p><p>Let me know what you think on <a href="https://twitter.com/joeahand">Twitter</a>. If you want to see all the code it is on <a href="https://github.com/joehand/joeahand">GitHub</a>.</p></div><footer class="post-footer"><a class="small-caps" href="https://joeahand.com/archive/dynamic-site-pelican-ifttt/"><span class="useicons">&#58882;</span><span class="pub_date">August 2015</span></a></footer></article></section><section class="post-full" data-id><header><h2 class="title"><a href="https://joeahand.com/archive/the-shockingly-simple-math-behind-early-retirement/" rel="bookmark" title="Permalink to The Shockingly Simple Math Behind Early Retirement">The Shockingly Simple Math Behind Early Retirement</a></h2><h5 class="link_url"><a href="http://www.mrmoneymustache.com/2012/01/13/the-shockingly-simple-math-behind-early-retirement/"><span class="useicons">&#58881;</span><span class="link_url">mrmoneymustache.com</span></a></h5></header><article class="content"><div class="entry-content"><p>There are countless blog posts about how to save for retirement. <a href="http://www.mrmoneymustache.com/2012/01/13/the-shockingly-simple-math-behind-early-retirement/">In this post</a> Mr. Money Mustache presents an amazingly simple and shockingly effective way to look at retirement; the amount of time until you can retire is simple a function of your savings rate. What doesn't matter? Your income, your spending, your age, or anything else.</p><p>Not only is the equation simple, the idea behind it is very powerful. Looking at the table he presents, you can see that by increasing your savings from 10% to 15% you can chop 8 years off your time until retirement. Wow!</p><p>The reason this works? In order to increase your savings rate, you probably have to decrease your spending. This means that you will be able to live off less for the rest of your life. And your money saved will be compounded over time. So, there are some strict assumptions in there. But the idea behind everything is very intriguing, and I suggest you at least <a href="http://www.mrmoneymustache.com/2012/01/13/the-shockingly-simple-math-behind-early-retirement/">take a look</a>.</p><p>I just discovered the Mr. Money Mustache site but already it has become an invaluable resource on financial advice for me. It bucks much of the conventional wisdom and focuses on spending less through decreased consumption, an idea that is close to my heart. Not only does it leads to more happiness, it helps our planet as well. <a href="http://www.mrmoneymustache.com/2013/02/22/getting-rich-from-zero-to-hero-in-one-blog-post/">Read away</a>!</p></div><footer class="post-footer"><a class="small-caps" href="https://joeahand.com/archive/the-shockingly-simple-math-behind-early-retirement/"><span class="useicons">&#58882;</span><span class="pub_date">June 2014</span></a></footer></article></section><section class="post-full" data-id><header><h2 class="title"><a href="https://joeahand.com/archive/the-reed-college-experience/" rel="bookmark" title="Permalink to The Reed College Experience">The Reed College Experience</a></h2><h5 class="link_url"><a href="http://www.reed.edu/reed_magazine/june2013/articles/features/oralhistory/oralhistory1.html"><span class="useicons">&#58881;</span><span class="link_url">reed.edu</span></a></h5></header><article class="content"><div class="entry-content"><p>The Reed College experience is often hard to capture. The latest Reed Magazine has a great history of the Reed experience and how it came to be. At Reed you "think about thinking" and learn reasoning by doing. During the process you realize “you are not your ideas, but merely a holder of your ideas.” But this all relies on a open process that does not define a starting and ending point:</p><blockquote><p>"If, on some level, we know what the learning system wants from us—say, by the use of grades as feedback on a defined path toward earning a degree to enter a specific career—we can erect certain internal defenses that allow us to choose how much of ourselves we give away to the system. But when the contract with the system is as existential as learning for the sake of learning, and progress is measured more qualitatively than quantitatively, we are apt to lose some of our psychic protections, allowing the system to get more deeply into our heads."</p></blockquote></div><footer class="post-footer"><a class="small-caps" href="https://joeahand.com/archive/the-reed-college-experience/"><span class="useicons">&#58882;</span><span class="pub_date">March 2014</span></a></footer></article></section><section class="post-full" data-id><header><h2 class="title"><a href="https://joeahand.com/archive/writing-matters/" rel="bookmark" title="Permalink to Writing Matters">Writing Matters</a></h2></header><article class="content"><div class="entry-content"><p><a href="http://randsinrepose.com/">Rands in Repose</a> writes great articles about technology and management; his writing is something I admire. Looking through the <a href="http://randsinrepose.com/archives/">post archives</a> on his site is overwhelming but also motivating. Scrolling to the bottom you pass a total of 460 posts over the course of twelve years &mdash; this is the overwhelming part. When you finally make it to the bottom you see the motivating bit, the first group of posts from 2002. Here are the titles for the Rands' first four posts:</p><ul><li>First Entry</li><li>No Title</li><li>No Title</li><li>No Title</li></ul><p>Like many of us, Rands started from scratch and started simply. He did not have a brilliant series of first posts. But he started and kept taking step after step. Through practice he became a great blogger. The graph below shows that his first few years he put in the most work on the blog, but after that he cruised at around 20 posts per year.</p><p><img alt="Posts Per Year on Rands in Repose" src="https://joehand_blog.s3.amazonaws.com/imgs/writing-matters-Rands-posts.png"></p><p>The amount of writing he did in the first three years is impressive. What what his motivation? Solving problems, making things happen, communicating ideas. In his first post he declared:</p><blockquote><p>IF YOU DON’T WRITE IT DOWN IT NEVER HAPPENED.</p></blockquote><h3>Writing Matters</h3><p>In this world of realtime video and immediate communication technology, it is odd to think that writing is important. But it is actually more important now than ever. The medium of writing used to be confined to books and papers or similar one-time productions. Now writing is rampant. Most communication now happens with writing (emails, tweets, texts, comments) where it used to be dominated by in-person meetings or calls. More people can publish their writing than ever before, with just the click of a button. Now, more than ever, it is crucial to be able to communicate through the written word.</p><p>Writing is important not just to communicate to others, but to communicate with yourself. Writing allows you to save ideas, build on them, create a comprehensive story around a single subject. Writing down ideas creates building blocks. You craft one part of your argument at a time until you have a cohesive structure. This is nearly impossible to do in your head alone. The act of writing itself helps to explore your idea.</p><p>Much later in Rands’ writing career he wrote about <a href="http://randsinrepose.com/archives/why-you-should/">why you should weblog</a>:</p><blockquote><p><strong>Exercise your ability to express yourself in words.</strong></p><p>If you’re reading this, you’ve chosen to use the web as a means of gathering new ideas. It is a non-trivial ability to take that drunken thought you had last Thursday and translate it a compelling argument that folks should talk about. Writing takes time and practice and time and practice.</p><p>When you create a space in your life for a weblog, you’re saying, “Writing matters.” You may not give a shit about writing, you may want to tell the world how much you think are physics is really cool, but to do so, you will need to write coherently.</p></blockquote><p>I have taken advantage of the writing of others to learn and create a better life for myself. I recognized that <strong><em>writing matters</em></strong>. And finally, I am going to do something about it.</p><p>This is the first step, a first post. And I need to take step after step once this is done and continue to build on this idea that writing matters, because <em>writing takes time and practice and time and practice.</em> Like Rands, I hope someday I can scroll through my lengthy archives, look at this first post, and laugh at how far I have come.</p></div><footer class="post-footer"><a class="small-caps" href="https://joeahand.com/archive/writing-matters/"><span class="useicons">&#58882;</span><span class="pub_date">January 2014</span></a></footer></article></section><div class="pagination small-caps"><span class="previous disabled">Newer</span><a class="next page-link" href="https://joeahand.com/blog/index2/">Older</a></div></div><div class="pure-u-2-24 pure-u-lg-1-5"></div></main><footer class="site-footer l-box pure-g is-center"><div class="pure-u-2-5 pure-u-md-1-3"><span class="copyright"> Joe Hand &nbsp;·&nbsp;<a href="http://creativecommons.org/licenses/by-nc-nd/4.0/">© 2017</a></span></div><div class="pure-u-1-5 pure-u-md-1-3"><div class="s-icons"><a class="mail useicons" href="mailto:joe@joeahand.com" rel="me">&#58885;</a><a class="twitter useicons" href="http://twitter.com/joeahand/" rel="me">&#58886;</a><a class="instagram useicons" href="http://instagram.com/joeahand" rel="me">&#58884;</a><a class="github useicons" href="https://github.com/joehand" rel="me">&#58887;</a></div></div><div class="pure-u-2-5 pure-u-md-1-3"><span><a href="https://joeahand.com/about/#about-site">Made By <span class="useicons hand">&#58883;</span></a></span></div></footer></div><script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-37465100-3', 'auto');
    ga('send', 'pageview');
</script></body></html>